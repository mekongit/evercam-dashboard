(function(){var e,i,t,a,n;a=function(){var e,i,t,a,n,r,c,d,o;if(i=$("#widget-camera").val(),c=$("#widget-refresh-rate").val(),o=$("#widget-camera-width").val(),n=$("#width-option").val(),r=$("#widget-authenticate").val(),d=window.location.origin,a=-1!==(t=$("#widget-camera option:selected").text()).indexOf("(Offline)"),e="<div id='ec-container-"+i+"' style='width: "+o+n+";position:relative;padding-top:56.2%;'></div> <script src='"+d+"/live.view.widget.js?refresh="+c+"&camera="+i+"&private="+(-1===t.indexOf("(Private)")?"false":"true")+("true"===r?"&api_id="+window.api_credentials.api_id+"&api_key="+window.api_credentials.api_key:"")+"' async></script>",$("#code").val(e),document.removeEventListener("visibilitychange",window.ec_vis_handler,!1),null!=window.ec_watcher&&clearTimeout(window.ec_watcher),!a)return $(".preview").html(e)},n=function(){var e,i,t,a,n,r,c,d;return i=$("#widget-camera").val(),r=$("#widget-refresh-rate").val(),d=$("#widget-camera-width").val(),a=$("#width-option").val(),n=$("#widget-authenticate").val(),c=window.location.origin,-1!==(t=$("#widget-camera option:selected").text()).indexOf("(Offline)"),e="<div id='ec-container-"+i+"' style='width: "+d+a+";position:relative;padding-top:56.2%;'><div> <script src='"+c+"/live.view.widget.js?refresh="+r+"&camera="+i+"&private="+(-1===t.indexOf("(Private)")?"false":"true")+("true"===n?"&api_id="+window.api_credentials.api_id+"&api_key="+window.api_credentials.api_key:"")+"' async></script>",$("#code").val(e),$("#ec-container-"+i).width(""+d+a)},t=function(){return $("#widget-camera").select2({templateSelection:e,templateResult:e,escapeMarkup:function(e){return e}}),$(".widget-input .select2-container--default").width("100%")},e=function(e){return"",e.id?"0"===e.id?e.text:$("<span><img style='height:30px;margin-bottom:1px;margin-top:1px;width:35px;' src='"+Evercam.MEDIA_API_URL+"cameras/"+e.id+"/thumbnail?api_id="+Evercam.User.api_id+"&api_key="+Evercam.User.api_key+"' class='img-flag' />&nbsp;"+e.text+"</span>"):e.text},i=function(){return $(".nav-tab-live").on("shown.bs.tab",function(){return a()}),$(".nav-tab-live").on("hide.bs.tab",function(){return $(".preview").html("")})},$(function(){return t(),i(),$("#widget-camera-width").change(n),$("#width-option").change(n),$("#widget-refresh-rate").change(a),$("#widget-camera").change(a),$("#widget-authenticate").change(n),$("#code").on("click",function(){this.select()})})}).call(this);